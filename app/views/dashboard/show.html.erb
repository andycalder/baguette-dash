<div class="container-fluid dashboard-container">

<h1 class="my-5 dashboard">Dashb<span class="o">o</span>ard</h1>


<ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
  <li class="nav-item">
    <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true">My orders 🥖</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab" aria-controls="pills-profile" aria-selected="false">Created meals 🍽</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="pills-contact-tab" data-toggle="pill" href="#pills-contact" role="tab" aria-controls="pills-contact" aria-selected="false">Pending orders 🕚</a>
  </li>
  <li class="nav-item justify-content-end ml-auto">
    <%= link_to "Create a new meal", new_meal_path , class: "d-inline-block btn btn-light create"%>
  </li>
</ul>
<div class="tab-content" id="pills-tabContent">
  <div class="tab-pane fade show active item" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
    <% @orders.each do |order| %>
          <div class="col-4 card mx-3 tab-1">
            <p class="">💸 <%= order.price %> &#36;</p>
            <p class="">🕚 <%= order.status %></p>
            <p class="">🙋‍♂️ <%= order.user.first_name %> <%= order.user.last_name %></p>
            <p class="">🍽 <%= order.meal.name %></p>
          </div>
        <% end %>
  </div>
  <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">

    <% @meals.each do |meal| %>
      <!-- everything in here -->
      <div class="created-meal">
        <div class="block-left">
          <%= image_tag "baguette-dash", class: "logo-footer" %>
          <div class="block-1">
            <div class="block-2">
              <p class="name"><%= meal.name %></p>
              <p class="price"><%= meal.price %> &#36;</p>
            </div>

            <p class="description"><%= meal.description %></p>
          </div>
        </div>
        <div class="block-buttons">
          <%= link_to "Edit meal", edit_meal_path(meal), class: "btn btn-primary btn-edit" %>
          <%= link_to "Remove meal", meal_path(meal), class: "btn btn-primary btn-delete", method: :delete %>
        </div>
      </div>
    <% end %>

  </div>
  <div class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">
    <% @all_orders.each do |order| %>
        <% if  order.meal.user == current_user && order.status.downcase == 'pending'%>
          <p class="">🍽 <%= order.meal.name %></p>
          <p class="">💸 <%= order.price %> &#36;</p>
          <% user = order.user %>
          <p class="">🙋‍♂️ <%= user.first_name %> <%= user.last_name %></p>
          <%= link_to "See details", edit_order_path(order), class: "btn btn-primary btn-details"  %>
          <%= link_to "Mark as delivered", order_path(order.id, order:{ status: 'delivered' } ), method: :patch, data: { confirm: "Mark #{order.meal.name} as delivered to #{order.user.first_name}?" }, class: "d-inline-block btn btn-delivered" %>
          <%= link_to "Mark as cancelled", order_path(order.id, order:{ status: 'cancelled' } ), method: :patch, data: { confirm: "Are you sure you want to cancel #{order.meal.name} to #{order.user.first_name}?" }, class: "d-inline-block btn btn-cancel" %>
        <% end%>
      <% end%>
  </div>
</div>












<!-- <nav>
  <div class="nav nav-tabs" id="nav-tab" role="tablist">
    <button class="nav-link active" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home" aria-selected="true">My orders 🥖</button>
    <button class="nav-link" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#nav-profile" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">Created meals 🍽</button>
    <button class="nav-link" id="nav-contact-tab" data-bs-toggle="tab" data-bs-target="#nav-contact" type="button" role="tab" aria-controls="nav-contact" aria-selected="false">Pending orders 🕚</button>
  </div>
</nav>
<div class="tab-content tab" id="nav-tabContent">
  <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
    <% @orders.each do |order| %>
          <div class="col-4 card mx-3 tab-1">
            <p class="price">💸 <%= order.price %> &#36;</p>
            <p class="status">🕚 <%= order.status %></p>
            <p class="user">🙋‍♂️ <%= order.user.first_name %> <%= order.user.last_name %></p>
            <p class="name">🍽 <%= order.meal.name %></p>
          </div>
        <% end %>
  </div>
  <div class="tab-pane fade tab tab-2" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
    <%= link_to "Create a new meal", new_meal_path , class: "d-inline-block btn btn-light"%> <i class="fas fa-mouse-pointer"></i>

      <div class="box">
      <% @meals.each do |meal| %>
        <p class="name">🍽 <%= meal.name %></p>
        <p class="description">💬 <%= meal.description %></p>
        <p class="price">💸 <%= meal.price %> &#36;</p>
        <%= link_to "Edit meal", edit_meal_path(meal), class: "btn btn-primary btn-edit" %>
        <%= link_to "Remove meal", meal_path(meal), class: "btn btn-primary btn-delete", method: :delete %>
      <% end %>
  </div>
</div>
  <div class="tab-pane fade tab tab-3" id="nav-contact" role="tabpanel" aria-labelledby="nav-contact-tab">
  <% @all_orders.each do |order| %>
        <% if  order.meal.user == current_user && order.status.downcase == 'pending'%>
          <p class="name">🍽 <%= order.meal.name %></p>
          <p class="price">💸 <%= order.price %> &#36;</p>
          <% user = order.user %>
          <p class="user">🙋‍♂️ <%= user.first_name %> <%= user.last_name %></p>
          <%= link_to "See details", edit_order_path(order), class: "btn btn-primary btn-details"  %>
          <%= link_to "Mark as delivered", order_path(order.id, order:{ status: 'delivered' } ), method: :patch, data: { confirm: "Mark #{order.meal.name} as delivered to #{order.user.first_name}?" }, class: "d-inline-block btn btn-delivered" %>
          <%= link_to "Mark as cancelled", order_path(order.id, order:{ status: 'cancelled' } ), method: :patch, data: { confirm: "Are you sure you want to cancel #{order.meal.name} to #{order.user.first_name}?" }, class: "d-inline-block btn btn-cancel" %>
        <% end%>
      <% end%>
    </div>
</div> -->

</div>
