<div class="container-fluid pl-4 mb-5">

<h1 class="my-5 dashboard">Dashb<span class="o">o</span>ard</h1>

<nav>
  <div class="nav nav-tabs" id="nav-tab" role="tablist">
    <button class="nav-link active" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home" aria-selected="true">My orders ğŸ¥–</button>
    <button class="nav-link" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#nav-profile" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">Created meals ğŸ½</button>
    <button class="nav-link" id="nav-contact-tab" data-bs-toggle="tab" data-bs-target="#nav-contact" type="button" role="tab" aria-controls="nav-contact" aria-selected="false">Pending orders ğŸ•š</button>
  </div>
</nav>
<div class="tab-content tab" id="nav-tabContent">
  <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
    <% @orders.each do |order| %>
          <div class="col-4 card mx-3 tab-1">
            <p class="price">ğŸ’¸ <%= order.price %> &#36;</p>
            <p class="status">ğŸ•š <%= order.status %></p>
            <p class="user">ğŸ™‹â€â™‚ï¸ <%= order.user.first_name %> <%= order.user.last_name %></p>
            <p class="name">ğŸ½ <%= order.meal.name %></p>
          </div>
        <% end %>
  </div>
  <div class="tab-pane fade tab tab-2" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
    <%= link_to "Create a new meal", new_meal_path , class: "d-inline-block btn btn-light"%> <i class="fas fa-mouse-pointer"></i>

      <div class="box">
      <% @meals.each do |meal| %>
        <p class="name">ğŸ½ <%= meal.name %></p>
        <p class="description">ğŸ’¬ <%= meal.description %></p>
        <p class="price">ğŸ’¸ <%= meal.price %> &#36;</p>
        <%= link_to "Edit meal", edit_meal_path(meal), class: "btn btn-primary btn-edit" %>
        <%= link_to "Remove meal", meal_path(meal), class: "btn btn-primary btn-delete", method: :delete %>
      <% end %>
  </div>
</div>
  <div class="tab-pane fade tab tab-3" id="nav-contact" role="tabpanel" aria-labelledby="nav-contact-tab"><% @all_orders.each do |order| %>
        <% if  order.meal.user == current_user && order.status.downcase == 'pending'%>
          <p class="name">ğŸ½ <%= order.meal.name %></p>
          <p class="price">ğŸ’¸ <%= order.price %> &#36;</p>
          <% user = order.user %>
          <p class="user">ğŸ™‹â€â™‚ï¸ <%= user.first_name %> <%= user.last_name %></p>
          <%= link_to "See details", edit_order_path(order), class: "btn btn-primary btn-details"  %>
          <%= link_to "Mark as delivered", order_path(order.id, order:{ status: 'delivered' } ), method: :patch, data: { confirm: "Mark #{order.meal.name} as delivered to #{order.user.first_name}?" }, class: "d-inline-block btn btn-delivered" %>
          <%= link_to "Mark as cancelled", order_path(order.id, order:{ status: 'cancelled' } ), method: :patch, data: { confirm: "Are you sure you want to cancel #{order.meal.name} to #{order.user.first_name}?" }, class: "d-inline-block btn btn-cancel" %>
        <% end%>
      <% end%>
    </div>
</div>

</div>
